/*
	JUL - The JavaScript UI Language module version 1.3.5
	Copyright (c) 2012 - 2016 The Zonebuilder (zone.builder@gmx.com)
	http://sourceforge.net/projects/jul-javascript/
	Licenses: GNU GPLv2 or later; GNU LGPLv3 or later (http://sourceforge.net/p/jul-javascript/wiki/License/)
 */
JUL={},function(e){"use strict";JUL={version:"1.3.5",apply:function(e,t,r){if(!t||"object"!=typeof t)return e;for(var s=[].concat(t),i=0;i<s.length;i++){t=s[i];for(var n in t)!t.hasOwnProperty(n)||r&&"undefined"==typeof e[n]||(e[n]=t[n])}return e},get:function(t,r){var s=r||e;if(!t)return s;if("string"!=typeof t)return t;for(var i=t.replace(/\\\./g,":::::").split("."),n="";i.length;){if(n=i.shift().replace(/:{5}/g,"."),"undefined"==typeof s[n])return s[n];s=s[n]}return s},makeCaller:function(e,t,r){if(!e||!t&&0!==t)return null;if("function"!=typeof t&&(t=e[t],"function"!=typeof t))return null;r=(r||!1)&&!0,this._callers=this._callers||[];for(var s=0;s<this._callers.length;s++)if(e===this._callers[s][0]&&t===this._callers[s][1]&&r===this._callers[s][2])return this._callers[s][3];var i=r?function(){return t.apply(e,[].slice.call(arguments).concat([this]))}:function(){return t.apply(e,[].slice.call(arguments))};return this._callers.length>16383&&(this._callers=this._callers.slice(1024,16384)),this._callers.push([e,t,r,i]),i},ns:function(t,r,s){var i=t?t.replace(/\\\./g,":::::").split("."):[],n="",o=/^(\d|[1-9]\d+)$/,h=s||e;for(!s&&i.length&&"window"===i[0]&&i.shift();i.length;)n=i.shift().replace(/:{5}/g,"."),"undefined"==typeof h[n]&&(h[n]=i.length&&o.test(i[0])?[]:{}),i.length||"undefined"==typeof r||(h[n]=r),h=h[n];return h},trim:function(e,t,r){if("string"!=typeof e&&(e=e.toString()),!e)return e;if(r||!t&&0!==t)return"function"==typeof String.prototype.trim?e.trim():e.replace(/\s+$/,"").replace(/^\s+/,"");"string"!=typeof t&&(t=t.toString());for(var s=e.length;s>=t.length&&e.slice(s-t.length,s)===t;)s-=t.length;if(s<e.length&&(e=e.slice(0,s)),e.length<t.length)return e;for(var i=0;i<=e.length-t.length&&e.slice(i,i+t.length)===t;)i+=t.length;return i&&(e=e.substr(i)),e},typeOf:function(e){return{}.toString.call(e).match(/\w+/g)[1]}},"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(e,t){for(var r=t||0;r<this.length;r++)if(this[r]===e)return r;return-1}),"function"!=typeof Array.prototype.map&&(Array.prototype.map=function(e,t){if("function"!=typeof e)return null;for(var r=[],s=0;s<this.length;s++)r.push(t?e.call(t,this[s],s,this):e(this[s],s,this));return r})}("undefined"!=typeof window?window:global),function(){"use strict";JUL.ns("JUL.Ref"),JUL.Ref=function(e,t){if(!(this instanceof JUL.Ref))return new JUL.Ref(e,t);if(e instanceof JUL.Ref)return void JUL.apply(this,e);if(this._ref=e,this._key=t,"object"==typeof e&&e.ref){this._ref=e.ref,this._key=e.key;for(var r in e)e.hasOwnProperty(r)&&"key"!==r&&"ref"!==r&&(this[r]=e[r])}},JUL.apply(JUL.Ref.prototype,{del:function(){return delete this._ref[this._key],this},key:function(e){return"undefined"!=typeof e?(this._key=e,this):this._key},ref:function(e,t){return e?e===!0?this._key:(e&&(this._ref=e),"undefined"!=typeof t&&(this._key=t),this):this._ref},val:function(e){return"undefined"!=typeof e?(this._ref[this._key]=e,this):this._ref[this._key]}})}(),function(e){"use strict";JUL.ns("JUL.UI"),JUL.apply(JUL.UI,{bindingProperty:"cid",childrenProperty:"children",classProperty:"xclass",cssProperty:"css",customFactory:null,defaultClass:"Object",htmlProperty:"html",idProperty:"id",includeProperty:"include",membersProperties:[],parentProperty:"parent",parserProperty:"parserConfig",referencePrefix:"=ref:",tagProperty:"tag",topDown:!1,useTags:!1,xmlNS:{aml:"http://www.amplesdk.com/ns/aml",aui:"http://www.amplesdk.com/ns/aui",chart:"http://www.amplesdk.com/ns/chart",html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",xform:"http://www.w3.org/2002/xforms",xul:"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"},Parser:function(e){JUL.apply(this,e),this.Parser=function(e){JUL.UI.Parser.call(this,e)},this.Parser.prototype=this},compact:function(e,t,r){if(e=this.include(e),"Array"!==JUL.typeOf(e[this.childrenProperty]))return e;for(var s=[],i={},n=0;n<e[this.childrenProperty].length;n++){var o=e[this.childrenProperty][n],h=o[this.classProperty]||this.defaultClass,a=this.useTags?h+":"+o[this.tagProperty]:h;s.indexOf(a)<0?s.push(a):i[a]=!0}var l={};for(var p in e)e.hasOwnProperty(p)&&p!==this.childrenProperty&&(l[p]=e[p]);var c={};for("undefined"==typeof r&&(r=this.membersProperties.length),n=0;n<e[this.childrenProperty].length;n++){o=e[this.childrenProperty][n],h=o[this.classProperty]||this.defaultClass,a=this.useTags?h+":"+o[this.tagProperty]:h;var f=this.useTags&&h===this.defaultClass?o[this.tagProperty]:a,u="object"==typeof o[this.childrenProperty]&&o[this.childrenProperty].length,y=this.membersProperties.indexOf(f);if(u&&(y<0||y>=r))if(t){for(p in o)if(o.hasOwnProperty(p)&&p!==this.classProperty&&p!==this.childrenProperty&&(!this.useTags||p!==this.tagProperty)){u=!1;break}}else u=!1;u&&!i[a]?c[f]=o[this.childrenProperty]:(c[this.childrenProperty]=c[this.childrenProperty]||[],c[this.childrenProperty].push(o))}for(p in c)if(c.hasOwnProperty(p))for(l[p]=c[p],p!==this.childrenProperty&&this.membersProperties.indexOf(p)<0&&this.membersProperties.push(p),n=0;n<c[p].length;n++)c[p][n]=this.compact(c[p][n],t,r);return l},create:function(e,t,r){if(!e)return null;if(t&&t[this.includeProperty]&&(t=this.include(t)),"Array"===JUL.typeOf(e))return e.map(function(e){return this.create(e,t,r)},this);for(var s={root:e},i={root:r},n=[new JUL.Ref({ref:s,key:"root",parent:r?new JUL.Ref(i,"root"):null})],o=n;n.length;){for(var h=[],a=0;a<n.length;a++){var l=n[a];if(l.val()&&!l.val()[this.parserProperty]){l.config=l.val(),delete l.config[this._instanceProperty];var p=this.include(l.config);if(p[this.bindingProperty]){if(t)for(var c=[].concat(p[this.bindingProperty]),f=0;f<c.length;f++)t[c[f]]&&JUL.apply(p,t[c[f]]);delete p[this.bindingProperty]}p[this.idProperty]&&t&&t[p[this.idProperty]]&&JUL.apply(p,t[p[this.idProperty]]),l.val(p);for(var u in p)if(p.hasOwnProperty(u)){if(this.referencePrefix&&"string"==typeof p[u]&&p[u].substr(0,this.referencePrefix.length)===this.referencePrefix){var y=JUL.trim(p[u].substr(this.referencePrefix.length));p[u]=y?JUL.get(y):null}if("object"==typeof p[u]&&[].concat(this.childrenProperty,this.membersProperties).indexOf(u)>-1){var d=[].concat(p[u]),g=JUL.typeOf(p[u]);if("Array"===g||this.topDown)for(var P=0;P<d.length;P++)h.push(new JUL.Ref({ref:d,key:P,parent:l}));else h.push(new JUL.Ref({ref:p,key:u,parent:l}));this.topDown?delete p[u]:"Array"===g&&(p[u]=d)}}}}o=this.topDown?o.concat(h):h.concat(o),n=h}for(a=0;a<o.length;a++)if(l=o[a],l.val())if(l.val()[this.parserProperty]){var m=JUL.apply({},l.val()),_=new this.Parser(m[this.parserProperty]);delete m[this.parserProperty],l.val(_.create(m,t,this.topDown&&l.parent?l.parent.val():null))}else this.topDown&&(l.val()[this.parentProperty]=l.parent?l.parent.val():null),l.val(this.createComponent(l.val())),this._keepInstance&&l.config&&(l.config[this._instanceProperty]=l.val());return s.root},createComponent:function(e){e[this.classProperty]||(e[this.classProperty]=this.defaultClass);var t="";e[this.idProperty]&&(t=e[this.idProperty],e[this.idProperty]=e[this.idProperty].replace(/\\\./g,"--").replace(/\./g,"-"),"window."===t.substr(0,7)&&(e[this.idProperty]=e[this.idProperty].substr(7)));var r=e[this.classProperty];this.customFactory||delete e[this.classProperty];var s=this.customFactory?JUL.get(this.customFactory).call(this,e):this.factory(r,e);return t.indexOf(".")>-1?JUL.ns(t.replace(/-/g,"_"),s):s},createDom:function(t,r){if(!t)return null;var s=t[this.classProperty].indexOf(":"),i=s>-1?t[this.classProperty].substr(0,s):t[this.classProperty];this.xmlNS[i]||(i="html");var n=function(){for(var e=[].slice.call(arguments),t=e.shift(),r=e.shift();e.length&&"undefined"==typeof e[e.length-1];)e.pop();return t[r].apply(t,e)},o=document,h="object"==typeof e.ample;if(h&&(o=ample),r=r||("html"===i||"function"!=typeof o.createElementNS?n(o,"createElement",s>-1?t[this.classProperty].substr(s+1):t[this.tagProperty],t.is):n(o,"createElementNS",this.xmlNS[i],s>-1?t[this.classProperty]:i+":"+t[this.tagProperty],t.is)),!r)return null;if(t.listeners&&"object"==typeof t.listeners){var a=t.listeners,l=a.scope?JUL.get(a.scope):null;for(var p in a)if(a.hasOwnProperty(p)&&"scope"!==p)for(var c=[].concat(a[p]),f=0;f<c.length;f++){var u=JUL.get(c[f]);u&&(h||r.addEventListener?r.addEventListener(p,l?JUL.makeCaller(l,u,!0):u):r.attachEvent("on"+p,JUL.makeCaller(l||r,u,!0)))}}for(p in t)if(t.hasOwnProperty(p)&&[].concat(this.childrenProperty,this.membersProperties).indexOf(p)<0&&["listeners",this.cssProperty,"style",this.htmlProperty,this.tagProperty,this.classProperty,this.parentProperty].indexOf(p)<0){s=p.indexOf(":");var y=["Array","Date","Function","Object","Null","RegExp"].indexOf(JUL.typeOf(t[p]))>-1?this.obj2str(t[p]):t[p];s>-1?r.setAttributeNS(this.xmlNS[p.substr(0,s)],p,y):r.setAttribute(p,y)}t[this.cssProperty]&&r.setAttribute("class",t[this.cssProperty]),t.style&&(h?r.setAttribute("style",t.style):r.style.cssText=r.style.cssText+";"+t.style),t[this.htmlProperty]&&(h?ample.query(r).append("<"===t[this.htmlProperty].substr(0,1)&&">"===t[this.htmlProperty].substr(-1)?t[this.htmlProperty]:"<span>"+t[this.htmlProperty]+"</span>"):r.innerHTML=t[this.htmlProperty]);for(p in t)if(t.hasOwnProperty(p)&&"Array"===JUL.typeOf(t[p])&&[].concat(this.childrenProperty,this.membersProperties).indexOf(p)>-1){var d=t[p],g=r;p!==this.childrenProperty&&(s=p.indexOf(":"),s>-1&&(i=p.substr(0,s)),g="html"===i?n(o,"createElement",s>-1?p.substr(s+1):p,t.is):n(o,"createElementNS",this.xmlNS[i],s>-1?p:i+":"+p,t.is));for(var P=0;P<d.length;P++)g.appendChild(d[P]);p!==this.childrenProperty&&r.appendChild(g)}return this.topDown&&t[this.parentProperty]&&"object"==typeof t[this.parentProperty]&&t[this.parentProperty].appendChild(r),r},expand:function(e){e=this.include(e);var t=[];for(var r in e)if(e.hasOwnProperty(r)&&e[r]&&"object"==typeof e[r]&&[].concat(this.childrenProperty,this.membersProperties).indexOf(r)>-1)if(r===this.childrenProperty)t=t.concat(e[r]);else{var s={};if(this.useTags||r===this.defaultClass||(s[this.classProperty]=r),this.useTags){var i=r.indexOf(":");i>-1&&r.substr(0,i)!==this.defaultClass&&(s[this.classProperty]=r.substr(0,i)),s[this.tagProperty]=i>-1?r.substr(i+1):r}s[this.childrenProperty]=[].concat(e[r]),delete e[r],t.push(s)}if(t.length){e[this.childrenProperty]=t;for(var n=0;n<t.length;n++)t[n]=this.expand(t[n])}return e},factory:function(t,r){for(var s=t.split("."),i=e,n="";s.length;){if(n=s.shift(),"undefined"==typeof i[n])return null;s.length&&(i=i[n])}return"function"!=typeof i[n]?null:r?new i[n](r):new i[n]},include:function(e,t){var r={};if(!e[this.includeProperty])return JUL.apply(r,e);t=t||this._includeMerger;for(var s=[].concat(e[this.includeProperty]),i=0;i<s.length;i++){var n=JUL.get(s[i]);n&&(t?t.call(this,r,this.include(n,t)):JUL.apply(r,this.include(n)))}var o=r[this.bindingProperty]?[].concat(r[this.bindingProperty]):[];return e[this.bindingProperty]&&o.indexOf(e[this.bindingProperty])<0&&o.push(e[this.bindingProperty]),t?t.call(this,r,e):JUL.apply(r,e),o.length&&(r[this.bindingProperty]=o),delete r[this.includeProperty],r},obj2str:function(e,t,r){if("undefined"==typeof this._useJsonize){var s=function(){};this._useJsonize=JSON.stringify({o:s},JUL.makeCaller(JUL.UI,"_jsonReplacer")).indexOf("function")<0}var i=this._useJsonize?JSON.stringify(this._jsonize(e)):JSON.stringify(e,JUL.makeCaller(this,"_jsonReplacer"));if(!i)return"";for(var n="#",o="",h="",a="",l="",p=!1,c=[],f=[],u=0,y=0,d=0,g=0;g<i.length;g++)if(o=i.substr(g,1),'"'===o&&"\\"!==n&&(p=!p,p&&(u=g)),p)t&&(a+=o),n=o;else{if(!t&&"{[,]}".indexOf(o)>-1&&"]}".indexOf(n)<0&&(a+=r?r.call(e,l,f.map(function(e){return e.toString().replace(/\./g,"\\.")}).join("."),h):l,l=""),'"'!==o||t)"{"===o||"["===o?(!t&&r&&f.push("["===o?0:""),c.push(o),1===c.length&&"}"!==i.substr(g+1,1)&&"]"!==i.substr(g+1,1)||"{"===o&&":"===n&&"}"!==i.substr(g+1,1)||"["===o&&("{"===i.substr(g+1,1)||"["===i.substr(g+1,1))?(h+=this._tabString,a=a+o+this._newlineString+h,y=a.length):a+=o):","===o?(this._phraseLength&&d&&a.length>y+this._phraseLength&&(a=a.slice(0,d)+this._newlineString+h+a.substr(d),y=d+this._newlineString.length+h.length),d=a.length+1,!t&&r&&c.length&&"["===c[c.length-1]&&f[f.length-1]++,1===c.length||"~"===n||("}"===n||"]"===n)&&"{"!==i.substr(g-2,1)&&"["!==i.substr(g-2,1)?(a=a+o+this._newlineString+h,y=a.length,d=0):t?a+=o:a=a+o+this._spaceString):"}"===o||"]"===o?(this._phraseLength&&d&&a.length>y+this._phraseLength&&(a=a.slice(0,d)+this._newlineString+h+a.substr(d),y=d+this._newlineString.length+h.length),d=0,!t&&r&&f.pop(),c.pop(),!c.length&&"{"!==n&&"["!==n||"}"===o&&c.length&&"{"===c[c.length-1]&&"{"!==n||"]"===o&&("}"===n||"]"===n)?(h=h.substr(this._tabString.length),a=a+this._newlineString+h+o,y=a.length-1):a+=o):t?a+=o:l+=":"===o?o+this._spaceString:o;else{var P=JSON.parse(i.substr(u,g-u+1));if(":"===i.substr(g+1,1))r&&(f[f.length-1]=P),l+=this._regExps.keyword.test(P)||!this._regExps.variable.test(P)&&!this._regExps.uint.test(P)?this._useDoubleQuotes?i.substr(u,g-u+1):"'"+i.substr(u+1,g-u-1).replace(/\\"/g,'"').replace(/'/g,"\\'")+"'":P;else{var m=!1;if(this._usePrefixes&&(P.substr(0,this._jsonPrefixes.func.length)===this._jsonPrefixes.func?(m=!0,P=P.substr(this._jsonPrefixes.func.length).replace(/^\s+/,"")):P.substr(0,this._jsonPrefixes.newop.length)===this._jsonPrefixes.newop&&(m=!0,P=P.substr(this._jsonPrefixes.newop.length).replace(/^\s+/,""))),m||!this._usePrefixes&&(this._regExps.functionStart.test(P)||this._regExps.newStart.test(P))){var _=P.match(/\n(\s|\t)+\}$/);_&&(_=_[0].substr(0,_[0].length-1),P=P.replace(new RegExp(_,"g"),"\n")),P=P.replace(/\t/g,this._tabString).replace(/\n\r?/g,this._newlineString+h),l+=P,n="~";continue}m=!1,this._usePrefixes&&P.substr(0,this._jsonPrefixes.regex.length)===this._jsonPrefixes.regex&&(m=!0,P=P.substr(this._jsonPrefixes.regex.length).replace(/^\s+/,"")),l+=m||!this._usePrefixes&&this._regExps.regexp.test(P)?P:this._useDoubleQuotes?i.substr(u,g-u+1):"'"+i.substr(u+1,g-u-1).replace(/\\"/g,'"').replace(/'/g,"\\'")+"'"}}n=o}return!t&&l&&(a+=r?r.call(e,l,"",h):l),a},xml2jul:function(e,t){if("object"!=typeof e&&(e=this._createXml(e)),e.error)return t?this.obj2str(e):e;if(e.parseError&&0!==e.parseError.errorCode)return t?this.obj2str({error:e.parseError.reason}):{error:e.parseError.reason};var r={},s=function(e,t,r){if("parsererror"===t.nodeName)return void(e.error=t.textContent);var i=t.nodeName.indexOf(":");!r&&i>-1?(this.defaultClass!==t.nodeName.substr(0,i)&&(e[this.classProperty]=t.nodeName.substr(0,i)),e[this.tagProperty]=t.nodeName.substr(i+1)):r&&this.defaultClass===t.nodeName||(e[r?this.classProperty:this.tagProperty]=t.nodeName);for(var n=0;n<t.attributes.length;n++){var o=t.attributes[n];"xmlns"!==o.name.substr(0,5)&&(e["class"===o.name?this.cssProperty:o.name]=this._regExps.number.test(o.value)||this._regExps.special.test(o.value)?JSON.parse(o.value):o.value)}t.childNodes.length&&3===t.firstChild.nodeType&&JUL.trim(t.firstChild.nodeValue)&&(e[this.htmlProperty]=t.firstChild.nodeValue);var h=[],a={};for(n=0;n<t.childNodes.length;n++){var l=t.childNodes[n];1===l.nodeType&&(h.indexOf(l.nodeName)>-1?a[l.nodeName]=!0:h.push(l.nodeName))}for(n=0;n<t.childNodes.length;n++)if(l=t.childNodes[n],1===l.nodeType){i=l.nodeName.indexOf(":");var p=!r&&i>-1&&this.defaultClass===l.nodeName.substr(0,i)?l.nodeName.substr(i+1):l.nodeName;if(!a[l.nodeName]&&[].concat(this.childrenProperty,this.membersProperties).indexOf(p)>-1){var c=[];e[p]=c;for(var f=0;f<l.childNodes.length;f++){var u=l.childNodes[f];1===u.nodeType&&(c.push({}),s.call(this,c[c.length-1],u,r))}}else c=e[this.childrenProperty]||[],e[this.childrenProperty]=c,c.push({}),s.call(this,c[c.length-1],l,r)}};return s.call(this,r,e.documentElement,!this.useTags),t?this.obj2str(r):r},_includeMerger:null,_instanceProperty:"_instance",_jsonPrefixes:{func:"=func:",regex:"=regex:",newop:"=newop:"},_keepInstance:!1,_newlineString:"\n",_phraseLength:120,_regExps:{variable:/^[a-z$_][\w$]*$/i,number:/^[\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?$/,uint:/^(\d|[1-9]\d+)$/,functionStart:/^function\s*\(/,newStart:/^new\s+[A-Z$_][\w$]*\s*\(/,isoDateStart:/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d/,regexp:/^\/(\s|\S)+\/[gim]{0,3}$/,special:/^(true|false|null)$/,autoUseStrict:/(\{)\r?\n?"use strict";\r?\n?/,keyword:/^(break|case|catch|continue|debugger|default|delete|do|else||finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with|class|enum|export|extends|import|super|implements|interface|let|package|private|protected|public|static|yield)$/},_spaceString:" ",_tabString:"\t",_useDoubleQuotes:!1,_usePrefixes:!1,_createXml:function(t){if(!e.DOMParser)return JUL.UI._xmlParser=JUL.UI._xmlParser||new ActiveXObject("Msxml2.DOMDocument.3.0"),JUL.UI._xmlParser.async=!1,JUL.UI._xmlParser.loadXML(t),JUL.UI._xmlParser;JUL.UI._xmlParser=JUL.UI._xmlParser||new DOMParser;try{return JUL.UI._xmlParser.parseFromString(t,"application/xhtml+xml")}catch(e){return{error:e.message}}},_jsonReplacer:function(e,t){switch("string"==typeof t&&JUL.UI._regExps.isoDateStart.test(t)&&(t=new Date(Date.UTC(parseInt(t.substr(0,4)),parseInt(t.substr(5,2))-1,parseInt(t.substr(8,2)),parseInt(t.substr(11,2)),parseInt(t.substr(14,2)),parseInt(t.substr(17,2)),"."===t.substr(19,1)?parseInt(t.substr(20,3)):0))),JUL.typeOf(t)){case"Function":return(this._usePrefixes?this._jsonPrefixes.func+" ":"")+t.toString().replace(JUL.UI._regExps.autoUseStrict,"$1");case"RegExp":return(this._usePrefixes?this._jsonPrefixes.regex+" ":"")+t.toString();case"Date":return(this._usePrefixes?this._jsonPrefixes.newop+" ":"")+"new Date(/*"+t.toUTCString().replace("UTC","GMT")+"*/"+t.getTime()+")";default:return t}},_jsonize:function(e,t){var r=e;if("undefined"==typeof t?t="":r=e[t],r&&"object"==typeof r&&"function"==typeof r.toJSON)return this._jsonReplacer(t,r.toJSON());switch(JUL.typeOf(r)){case"Array":for(var s=[],i=0;i<r.length;i++)try{s[i]=this._jsonize(r,i)}catch(e){s[i]=null}return s;case"Object":var n={};for(var o in r)try{r.hasOwnProperty(o)&&(n[o]=this._jsonize(r,o))}catch(e){}return n;default:return this._jsonReplacer(t,r)}}}),JUL.UI.Parser.prototype=JUL.UI}("undefined"!=typeof window?window:global);